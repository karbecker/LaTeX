% Preamble Diss
% Karl Becker, Stand: 31.10.17
% -------------------
\documentclass[12pt,a4paper,oneside,toc=indentunnumbered,twoside,openright]{article}
\usepackage{emptypage}
% Fonts definieren
\usepackage{xltxtra}
\usepackage{titlesec}
\setmainfont[
  Ligatures=TeX,
  SmallCapsFont={Scala Caps},
  ]{Scala}
\setsansfont{ScalaSans}
\setmonofont{Hack}
% -------------------
% Anhang
\usepackage[toc,page]{appendix}
\renewcommand{\appendixtocname}{Anhang}
\renewcommand{\appendixpagename}{Anhang}
% Seitenränder
\usepackage{geometry}
\usepackage[hyphens]{url} 
\geometry{includeheadfoot,inner=30mm,outer=35mm,top=15mm, bottom=10mm,footnotesep=7.5mm,headsep=7.5mm}
% Euro-Symbol (\euro)
\usepackage[gen]{eurosym}
% -------------------
% Inhaltsverzeichnis
% -------------------
\usepackage[titles]{tocloft}
% TOC: … zur Seitenzahl
\renewcommand\cftsecleader{\cftdotfill{1}}
\renewcommand\cftsubsecleader{\cftdotfill{1}}
\renewcommand\cftsubsubsecleader{\cftdotfill{1}}
\renewcommand\cfttableader{\cftdotfill{1}}
% TOC: Punkt nach 1.
% \renewcommand{\cftsecaftersnum}{.}%
% TOC: Schriften
% Seitenzahlen
\renewcommand\cftsecpagefont{\small\sffamily}
\renewcommand\cftsubsecpagefont{\small\sffamily}
\renewcommand\cftsubsubsecpagefont{\small\sffamily}
\renewcommand\cfttabpagefont{\small\sffamily}
\renewcommand\cftfigpagefont{\small\sffamily}
% Titel
\renewcommand\cftsecfont{\bfseries\sffamily}
\renewcommand\cftsubsecfont{\sffamily}
\renewcommand\cftsubsubsecfont{\itshape\sffamily}
\renewcommand\cfttabfont{\bfseries\sf}
% TOC: Abstände
\setlength{\cftbeforesecskip}{0.2cm}
\setlength{\cftbeforesubsecskip}{0.2cm}
\setlength{\cftbeforesubsubsecskip}{0.2cm}
\setlength{\cftsecnumwidth}{0.5cm}
\setlength{\cftsubsecnumwidth}{0.75cm}
\setlength{\cftsubsubsecnumwidth}{1cm}
% -------------------
% Silbentrennung
\usepackage[ngerman]{babel}
\usepackage[babel,german=quotes]{csquotes}
% -------------------
% Grafiken einbinden
\usepackage{graphicx}
\usepackage{wrapfig}
% -------------------
% \chapquote: {Text}{Autor}
\newcommand{\chapquote}[2]{\begin{quotation} \itshape#1 \end{quotation} \begin{flushright} – #2 \end{flushright} }
% BibTex
% -------------------
% Zitierstil klassisch in der Fußnote
% \usepackage[backend=bibtex,style=verbose-trad2]{biblatex}
\usepackage[backend=bibtex8,style=verbose-ibid,citepages=omit]{biblatex}
% ibid etc. kursiv
\renewcommand*{\mkibid}{\emph}
% Bibtex Datei einbinden: 
\bibliography{/Users/Karl/Dropbox/Promotion/All.bib}
\newcommand{\citep}{\cite}
\newcommand{\citet}{\autocite}
% Damit werden um URLs in den Biblatex Fußnoten keine Spaces mehr gebaut (https://tex.stackexchange.com/q/114538/112687)
\toks0\expandafter{\biburlsetup}
\edef\biburlsetup{\the\toks0 \Urlmuskip =0mu\relax}
% fertig
\usepackage{xpatch}
% -------------------
% Sonderzeichen
\usepackage{textcomp}
% -------------------
% Source code formatting and highlighting
\usepackage{listings} 
\makeatletter
\lstdefinestyle{inline}{
  basicstyle=%
    \ttfamily
    \lst@ifdisplaystyle\scriptsize\fi
    \lst@ifdisplaystyle\color{red}\fi
}
\makeatother
\renewcommand{\lstlistingname}{Code}
\lstset{basicstyle={\footnotesize\ttfamily}, breaklines=true, numbers=left, numberstyle={\scriptsize\ttfamily\color{gray!50}}, columns=fullflexible, showstringspaces=false, backgroundcolor=\color{gray!10}}
% -------------------
% Scrivener Kommentar = LaTeX ToDo
\usepackage[draft, textsize=tiny, textwidth=2cm, bordercolor=white]{todonotes}
% -------------------
% Tabellen
\usepackage{longtable}
\usepackage{booktabs} % schönere Tabellen
\usepackage[font=sf]{floatrow}
\setlength{\tabcolsep}{6pt}
\renewcommand{\arraystretch}{1.5}
%\usepackage{float} % Float Optionen, redundant?
% -------------------
% Bildunterschriften formatieren
\usepackage[font=footnotesize,labelfont=bf,font=sf,labelsep=endash,singlelinecheck=false,format=plain,justification=raggedleft]{caption}
% -------------------
% Zeilenabstand
\linespread {1.5}
\usepackage[onehalfspacing]{setspace}
% -------------------
% Listen
% -------------------
\usepackage{enumitem}
\setlist{noitemsep}
% \setlist[1]{\labelindent=\parindent}
\setlist[itemize]{leftmargin=*}
\setlist[enumerate]{labelsep=*, leftmargin=1.5pc}
\setlist[enumerate,1]{label=\arabic*., ref=\arabic*}
\setlist[enumerate,2]{label=\emph{\alph*}), ref=\theenumi.\emph{\alph*}}
\setlist[enumerate,3]{label=\roman*), ref=\theenumii.\roman*}
\setlist[description]{font=\sffamily\bfseries}
% -------------------
\newcommand{\sectionbreak}{\clearpage}
\titlespacing*{\section}{0pt}{2ex}{3ex}
% URLs nicht in Monospace
\urlstyle{rm}
% Überschriften Sans-Serif
\titleformat*{\section}{\Large\bfseries\sffamily}
\titleformat*{\subsection}{\large\bfseries\sffamily}
\titleformat*{\subsubsection}{\normalsize\bfseries\sffamily}
% -------------------
% Fußnoten einrücken
\usepackage[marginal,bottom]{footmisc}
\setlength{\footnotemargin}{-1.2em}
% Den Abstand zwischen der Fußnotenlinie und der ersten Fußnote vergrößern: Zum anpassen die Zahl -6 und 5.6 gleichmäßig anpassen
\makeatletter
\def\footnoterule{\kern-6\p@
  \hrule \@width 2in \kern 5.6\p@} % the \hrule is .4pt high
\makeatother
% -------------------
% Text sperren
\usepackage{soul} % Markierung: \so{gesperrt}
% -------------------
% Schusterjungen & Hurenkinder verhindern
\usepackage[defaultlines=4,all]{nowidow}
% -------------------
% Kopfzeile
% -------------------
\usepackage[automark,nouppercase,plainfootsepline,plainheadsepline]{scrpage2}
\automark[subsection]{section}
\renewcommand*{\sectionmarkformat}{}
% Kopfzeile Schriftarten
\renewcommand{\headfont}{\footnotesize\sffamily}
\renewcommand{\pnumfont}{\footnotesize\sffamily}
% Kopfzeile Inhalt (Inhalt der Klammern entfernen für leer)
\ihead[\headmark]{\headmark} % Oben innen: Setzt Kapitel 
\ohead[\pagemark]{\pagemark} % Oben außen: Seitenzahlen
\setheadsepline{0.05em}
% Kopfzeile an:
\pagestyle{scrheadings}
% -------------------
% quote Umgebung kursiv
\usepackage{etoolbox}
\AtBeginEnvironment{quote}{\small\singlespacing}
\AtBeginEnvironment{quote}{\itshape}

% Wörter, die einen Bindestrich beinhalten nicht umbrechen -> führt zu Problemen
%\exhyphenpenalty=10000
% -------------------
\usepackage{upquote} % upright-quote and grave-accent glyphs in verbatim
% -------------------
\usepackage{scrextend} % Use of components of KOMA-Script by other packages
\addtokomafont{labelinglabel}{\bf\sffamily}
% Section Number im Rand
\makeatletter
\def\@seccntformat#1{\llap{\csname the#1\endcsname\quad}}
\makeatother
% Marginpar (Randnotiz)
\newcommand\mpar[1]{
\marginpar {\scriptsize\flushleft\sffamily\footnotesize #1}}
\setlength{\marginparwidth}{3cm}
% -------------------
% Stichwortverzeichnis (Geht nur in Texpad)
%\usepackage{makeidx}
%\makeindex
% -------------------
% PDF Outline, Infos & Links generieren
\usepackage[hyperfootnotes=false,hidelinks]{hyperref}
% Datei mit Metadaten laden
\input{/Users/Karl/Dropbox/Promotion/TeX/hyper.tex}
% -------------------
\begin{document}
\sloppy % Damit kein Text in den rechten Rand austritt (dafür ist der Blocksatz nicht perfekt)
\renewcommand{\sectionautorefname}{Kapitel} % Autoref Section zu Kapitel
% -------------------
% Extras einbinden	
% -------------------
\pagenumbering{roman}
%\input{/Users/Karl/Dropbox/Promotion/TeX/deckblatt_diss.tex} % Deckblatt
\input{/Users/Karl/Github/LaTeX/ToC.tex} % ToC
%\input{/Users/Karl/Github/LaTeX/LoF.tex} % Abbildungsverzeichnis
%\input{/Users/Karl/Github/LaTeX/LoT.tex} % Tabellenverzeichnis
\pagenumbering{arabic}
